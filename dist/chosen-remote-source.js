/*
 * chosen-remote-source
 * @version v0.9.0
 * @link http://github.com/westonganger/chosen-remote-source
 * @license MIT
 */
!function(e){var t=".chosen-remote-source",l=250,o=e("<select></select>");o.chosen(),Object.getPrototypeOf(o.data("chosen")).show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.default_text===this.search_field.val()&&this.search_field.val(""),this.search_field.removeClass("default"))};var s=function(){var t=e(this),l=t.val(),o=t.closest(".chosen-container").prev("select"),s=o.data("chosen-remote-source-opts"),n=o.val();if(o[0].hasAttribute("multiple"))for(var i=0;i<n.length;i++)selected_opts+=o.find("option[value="+n[i]+"]")[0].outerHTML;else n&&(selected_opts+=o.find("option[value="+n+"]")[0].outerHTML);e.ajax({url:s.url,dataType:"json",data:{q:l,selected:n},type:"GET"}).done((function(e){for(var t="",l=0;l<e.length;l++)t+="<option value='"+e[l][t.value_field]+"'>"+e[l][t.label_field]+"</option>";selected_opts&&(t+=selected_opts),o.html(t).val(n).trigger("chosen:updated")}))};e.fn.chosenRemoteSource=function(o){if(!o.url)return console.error("Error: url must be defined"),!1;if(o.event){events=event.split(" ");for(var n="",i=0;i<events.length;i++)0!==i&&(events+=" "),events+=events[i]+t;o.event=null}else n="input"+t;var a=this.filter((function(t,l){return e(l).data("chosen")})),r={};r.url=o.url||default_options.url,r.label_field=o.label_field||default_options.label_field,r.value_field=o.value_field||default_options.value_field,a.data("chosen-remote-source-opts",r);var u=function(e,t){var l;return function(){var o=this,s=arguments,n=function(){l=null,t.apply(o,s)};clearTimeout(l),l=setTimeout(n,e)}}(o.delay||l,s);return a.off(t),a.on(n,"input.chosen-search-input",u),this}}(window.jQuery||window.Zepto||window.$);
